# Vue笔记

## 1.Vue模板语法

### 插值

vue中插入文本时使用双大括号语法，此时当绑定的数据对象值变动时，插值处的内容会实时更新。如果想执行一次性插值，当数据再次改变但插值处内容不会更新，可以使用`v-once`指令。

想要在模块上插入真正的html而非html代码，需要使用`v-html`指令。

如果想要动态修改html特性，如动态修改`id`、`disabled`之类的特性，可以使用`v-bind`指令。示例：`<span v-bind:id="dynamicId"></span>`，`<button v-bind:disabled="isButtonDisabled">btn</button>`。值得注意的是，当`isButtonDisabled`值为假时，`disabled`特性甚至不会被包含在渲染出来的`<button>`元素上。

### 指令

指令是带有 `v-` 前缀的特殊特性，它的职责是，当表达示的值改变时，将其产生的连带影响，响应式的作用于DOM。

指令有`v-if`、`v-for`、`v-bind`、`v-on`。后两个指令可以在指令名称之后添加 " 冒号 + 参数 "来监听DOM事件或响应式的更新DOM特性。

例如`<a v-bind:href="url"></a>`，这里的`href`就是指令参数，意指将`a`元素的`href`特性与表达式`url`的值绑定; `<p v-on:click="doSomething">监听DOM</p>`，这里的`click`就是监听的事件名，`doSomething`就是`click`事件对应的事件处理函数。

### 缩写

vue为`v-bind`和`v-on`这两个最常用的指令提供了特定简写：`<a v-bind:href="url"></a>`可以简写为`<a :href="url"></a>`；`<p v-on:click="doSomething">监听DOM</p>`可以简写为`<p @click="doSomething">监听DOM</p>`。

## 2.计算属性和侦听器

对于复杂逻辑，可以在表达式中使用**计算属性**，这个计算属性定义在`computed`对象中，计算属性是一个进行逻辑运算并必须返回运算结果的函数，可以像绑定普通属性一样在模板中绑定计算属性名。

### a.计算属性可缓存 / 方法不可缓存

如果计算属性中的运算逻辑依赖`data`对象中的数据属性(响应式依赖)，那么当对应的数据属性改变时，所有依赖该数据属性的计算属性就会重新求值。也就是说如果该数据属性值没有发生改变，即使多次访问计算属性也会立即返回之前的计算结果，而不必再次执行计算属性函数，这就是计算属性的特点：**可以缓存**。

通过在表达式中调用**方法**可以达到和计算属性一样的结果获取，但是**每当触发重新渲染时，调用方法总会再次执行。**

### b.计算属性 / 侦听属性

侦听属性`watch`是一种更通用的用于观察和响应Vue实例上数据变动的方式。但容易滥用，通常情况下推荐使用计算属性而非命令式的`watch`回调。但是当需要在数据变化时执行异步或开销较大的操作时，选择侦听属性`watch`是更合适的。

所以对于**计算属性computed**、**方法methods**和**侦听属性watch**，各自选用的场景建议如下：

- 对于性能开销较大且响应式依赖`data`对象中数据属性的运算逻辑，可以使用计算属性`computed`，这样当依赖的数据属性值不变时即便多次访问该计算属性也会立即返回之前计算并缓存的运算求值结果，直到依赖的数据属性值改变再次访问该计算属性时才会重新执行运算逻辑函数；

- 对函数运算结果没有缓存需求的情况，推荐在方法`methods`中添加运算函数；

- 当需要在数据变化时执行异步或者开销较大的操作时，推荐在侦听属性`watch`中添加运算函数。